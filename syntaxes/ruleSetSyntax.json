{
    "$id": "AL Rule Set File Syntax",
    "$schema": "http://json-schema.org/draft-07/schema",
    "description": "Schema for a file containing a rule set.",
    "type": "object",
    "required": [
        "name"
    ],
    "additionalProperties": false,
    "properties": {
        "name": {
            "description": "The name of the rule set.",
            "type": "string"
        },
        "description": {
            "description": "The description of the rule set",
            "type": "string"
        },
        "generalAction": {
            "description": "The action to apply to all the diagnostics that have a Default action specified.",
            "enum": [
                "Error",
                "Warning",
                "Info",
                "Hidden"
            ]
        },
        "includedRuleSets": {
            "description": "List of external rule set files to include in the current rule set.",
            "type": "array",
            "items": {
                "$ref": "#/definitions/includedRuleSet"
            },
            "uniqueItems": true
        },
        "rules": {
            "description": "Collection of rules to be applied to diagnostics generated by this analyzer.",
            "type": "array",
            "items": {
                "$ref": "#/definitions/rule"
            },
            "minItems": 1,
            "uniqueItems": true
        }
    },
    "definitions": {
        "rule": {
            "type": "object",
            "required": [
                "id",
                "action"
            ],
            "additionalProperties": false,
            "properties": {
                "id": {
                    "description": "The string that uniquely identifies a diagnostic.",
                    "$ref": "#/definitions/nonEmptyString"
                },
                "action": {
                    "description": "The action to apply if the diagnostic is emitted.",
                    "enum": [
                        "Error",
                        "Warning",
                        "Info",
                        "Hidden",
                        "None"
                    ]
                },
                "justification": {
                    "description": "The justification for this rule.",
                    "type": "string",
                    "minLength": 1
                }
            }
        },
        "includedRuleSet": {
            "type": "object",
            "required": [
                "action",
                "path"
            ],
            "additionalProperties": false,
            "properties": {
                "action": {
                    "enum": [
                        "Error",
                        "Warning",
                        "Info",
                        "Hidden",
                        "None",
                        "Default"
                    ],
                    "description": "The action to apply for all the diagnostics that have a Default action specified in the included rule set."
                },
                "path": {
                    "$ref": "#/definitions/nonEmptyString",
                    "description": "The path to the included file. The path can be absolute or relative to the project folder."
                }
            }
        },
        "nonEmptyString": {
            "type": "string",
            "minLength": 1
        }
    }
}